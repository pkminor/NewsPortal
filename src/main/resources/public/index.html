<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>NewsPortal</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
   <link rel="stylesheet" href="styles.css">
</head>
<body>
 <div ng-app="newsportal" ng-controller="appcontrol">
     <div class="np-controls"></div>
     <div class="np-content">
        <div class="container mt-3">

                <h2>News Portal</h2>
                <br>
                <!-- Nav pills -->
                <ul class="nav nav-pills" role="tablist">
                  <li class="nav-item">
                    <a class="nav-link active" data-toggle="pill" href="#users">Users</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" data-toggle="pill" href="#departments">Departments</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" data-toggle="pill" href="#generalNews">General News</a>
                  </li>
                  <li class="nav-item">
                        <a class="nav-link" data-toggle="pill" href="#departmentNews">Department News</a>
                  </li>
                </ul>
              
                <!-- Tab panes -->
                <div class="tab-content">
                  <div id="users" class="container tab-pane active"><br>
                    <h3>Users</h3>
                    <ul class="mt-5">
                            <li ng-if="users" class="my-1" ng-repeat="user in users">
                                <div class="shadow p-2 bg-white">
                                    <div class="card-title">{{user.id}}</div>
                                    <hr>
                                    <div class="card-text">{{user.name}}</div>
                                </div>
                            </li>
                    </ul>
                  
                  </div>
                  <div id="departments" class="container tab-pane fade"><br>
                    <h3>Departments</h3>
                    <ul class="mt-5">
                            <li ng-if="departments" class="my-1" ng-repeat="dpt in departments">
                                <div class="shadow p-2 bg-white">
                                    <div class="card-title">{{dpt.id}}</div>
                                    <hr>
                                    <div class="card-text">{{dpt.name}}</div>
                                    <div class="card-text">{{dpt.description}}</div>
                                    <div class="card-text">{{dpt.count}}</div>
                                </div>
                            </li>
                    </ul>
                  
                  </div>
                  <div id="generalNews" class="container tab-pane fade"><br>
                    <h3>General News</h3>
                    <ul class="mt-5">
                            <li ng-if="general_news" class="my-1" ng-repeat="gnews in general_news">
                                <div class="shadow p-2 bg-white">
                                    <div class="card-title">{{gnews.id}}</div>
                                    <hr>
                                    <div class="card-text">{{gnews.userid}}</div>
                                    <div class="card-text">{{gnews.type}}</div>
                                    <div class="card-text">{{gnews.content}}</div>
                                    <div class="card-text">{{gnews.postdate}}</div>
                                    
                                </div>
                            </li>
                    </ul>
                   
                  </div>
                  <div id="departmentNews" class="container tab-pane fade"><br>
                    <h3>Department News</h3>
                    <ul class="mt-5">
                            <li ng-if="department_news" class="my-1" ng-repeat="dnews in department_news">
                                <div class="shadow p-2 bg-white">
                                    <div class="card-title">{{dnews.id}}</div>
                                    <hr>
                                    <div class="card-text">{{dnews.userid}}</div>
                                    <div class="card-text">{{dnews.type}}</div>
                                    <div class="card-text">{{dnews.content}}</div>
                                    <div class="card-text">{{dnews.postdate}}</div>
                                    <div class="card-text">{{dnews.departmentId}}</div>
                                </div>
                            </li>
                    </ul>
                    
                  </div>
                </div>


            
            

        </div>
     </div>     
     <div class="np-filters"></div>
 </div>
 <script>
     app=angular.module("newsportal",[]);
     app.controller("appcontrol",function($scope,$http){

         $http.get("http://localhost:7654/users")
         .then(function(response){
             $scope.users =response.data;            
             //console.log($scope.users.length);
             //console.log($scope.users);
             });

         $http.get("http://localhost:7654/departments")
         .then(function(response){
             $scope.departments =response.data;             
             //console.log($scope.users.length);
             //console.log($scope.users);
             });

          $http.get("http://localhost:7654/news")
         .then(function(response){
             $scope.news =response.data;
             //console.log($scope.users.length);
             //console.log($scope.users);
             });

          $http.get("http://localhost:7654/news/general")
         .then(function(response){
             $scope.general_news =response.data;
             //console.log($scope.users.length);
             //console.log($scope.users);
             });

          $http.get("http://localhost:7654/news/department")
         .then(function(response){
             $scope.department_news =response.data;
             //console.log($scope.users.length);
             //console.log($scope.users);
             });

     });
 </script>
</body>
</html>